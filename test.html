<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
  box-sizing: border-box;
}

dl {
  margin: 0;
  padding: 24px 0 0 0;
}

dt {
  background: #B8C1C8;
  border-bottom: 1px solid #989EA4;
  border-top: 1px solid #717D85;
  color: #FFF;
  font: bold 18px/21px Helvetica, Arial, sans-serif;
  margin: 0;
  padding: 2px 0 0 12px;
  position: -webkit-sticky;
  position: sticky;
  top: -1px;
}

dd {
  font: bold 20px/45px Helvetica, Arial, sans-serif;
  margin: 0;
  padding: 0 0 0 12px;
  white-space: nowrap;
}

dd + dd {
  border-top: 1px solid #CCC
}
    </style>
</head>
<body>

</body>
<script>
function toTree(data){
    let result = [];
    if(!Array.isArray(data)){
        return result;
    }
    data.forEach(item => {
        delete item.children;
    })

    let map = {};
    data.forEach(item =>{
        map[item.id] = item;
    });
    
    data.forEach(item =>{
        let parent = map[item.pid];
        if(parent){
            (parent.children || (parent.children = [])).push(item);
        }else{
            result.push(item);
        }
    });

    return result;
}

let arr = [
  {
    id: 1,
    pid: 0,
    name: 'body'
  },
  {
    id: 2,
    pid: 1,
    name: 'title'
  },
  {
    id: 3,
    pid: 1,
    name: 'div'
  },
  {
    id: 4,
    pid: 3,
    name: 'span'
  },
  {
    id: 5,
    pid: 3,
    name: 'icon'
  },
  {
    id: 6,
    pid: 4,
    name: 'subspan'
  }
];

console.log(toTree(arr));
</script>
</html>