# 应用面试题
[如何避免重复提交订单](#1)
[如何解决短信验证码被狂刷，服务器崩溃怎么优化](###  如何解决短信验证码被狂刷，服务器崩溃怎么优化)
[亿级用户的在线状态如何统计（社交软件）](###  亿级用户的在线状态如何统计（社交软件）)
### 如何避免重复提交订单 {#1}
1. 前端防抖
  - 防止用户重复点击，出发多次请求
2. 后端用户Token
  - 防止恶意请求，如爬虫；缓存一个唯一Token
  - 同一个Token的多次请求，只会相应一个，使用分布式锁（Toekn请求唯一）和Lua实现（原子性）
3. 支付订单幂等
  - 通过订单内容（如物品类型，金额等）生成，根据结果生成支付状态

### 如何解决短信验证码被狂刷，服务器崩溃怎么优化
1. 限制短信发送时间间隔，后端记录发送方手机号，进行查询比对；前端加入时间倒计时，倒计时内加入按钮禁用状态
2. 设置手机号码发送次数，
3. 增加图形验证码
4. 控制短信验证码调用次数（在时间限制内缓存验证码结果）
5. 前后端唯一性token验证
6. 设置黑名单

### 亿级用户的在线状态如何统计（社交软件）
- Redis中使用Set对用户状态进行缓存，以每个字段4Bit计算，10亿用户越需要4G内存；
- 或者使用BitMap进行缓存，只需约300M，优化32倍，但是只适合用户ID为自增型的密集型数据；对于UUID和雪花算法生成的ID不适用；
### 
